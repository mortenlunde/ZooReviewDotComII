@page "/"
@using Markdig
@inject IWebHostEnvironment Env

<PageTitle>Welcome</PageTitle>

<h1>Welcome to Zoo Review!</h1>
<hr/><br/><br/>
<p>
    Thank you for visiting our app! We provide a platform where you can share and explore reviews for various zoos around the world.
</p>

<p>
    Use the navigation menu to browse through different reviews, see ratings, and share your own experiences.
</p>

<br/>
<strong>Get started:</strong>
<ul>
    <li><a href="/reviews/create">Create a new review</a></li>
    <li><a href="/reviews">Browse Reviews</a></li>
    <li><a href="/zoos">Browse Zoos</a></li>
</ul>
<br/>
<p>Enjoy your stay!</p>
<br/>
<!-- README Content -->
<h3>Project Documentation</h3>
<div class="code-block">
    <div class="code-header">
        <span class="filename">README.md</span>
        <button class="copy-button" onclick="copyToClipboard()">Copy Code</button>
    </div>
    <div class="readme-content">
        @((MarkupString)_markdownContent) <!-- Render Markdown content as HTML -->
    </div>
</div>

@code {
    private string _markdownContent = "";

    protected override async Task OnInitializedAsync()
    {
        var filePath = Path.Combine(Env.ContentRootPath, "README.md");

        if (File.Exists(filePath))
        {
            var markdown = await File.ReadAllTextAsync(filePath);
            var pipeline = new MarkdownPipelineBuilder().UseAdvancedExtensions().Build();
            _markdownContent = Markdown.ToHtml(markdown, pipeline);
        }
        else
        {
            _markdownContent = "<p><em>README.md file not found.</em></p>";
        }
    }
}

<script>
    function copyToClipboard() {
        const codeContent = document.querySelector('.readme-content').innerText;
        navigator.clipboard.writeText(codeContent).then(() => {
            alert("Code copied to clipboard!");
        }).catch(err => {
            console.error('Failed to copy text: ', err);
        });
    }
</script>

<style>
    .code-block {
        border: 1px solid #ddd;
        border-radius: 6px;
        overflow: hidden;
        margin-top: 20px;
    }

    .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #f5f5f5;
        padding: 10px;
        font-family: Arial, sans-serif;
        border-bottom: 1px solid #ddd;
    }

    .filename {
        font-weight: bold;
        color: #333;
    }

    .copy-button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
    }

    .copy-button:hover {
        background-color: #0056b3;
    }

    .readme-content {
        padding: 15px;
        background-color: #fdfdfd;
        font-family: monospace;
        white-space: pre-wrap;
    }
</style>
